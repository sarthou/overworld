<html lang="en_US">

<head>
  <title>Setting up the robot description : Represent your robot</title>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <link href="../../style/overworld_api.css" rel="stylesheet" type="text/css">
  <link href="../../images/favicon.ico" rel="shortcut icon">
  <link href="../../images/favicon-32x32.png" rel="icon" type="image/png">
  <link href="../../images/favicon-16x16.png" rel="icon" type="image/png">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css"
    integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
</head>

<body>
  <div class="header" id="header">
    <header class="fixed" id="navbar">
      <div class="container">
        <div class="navbar-header">
          <div id="header-buttons">
            <ul id="header-ul" data-event="hover_intent" data-effect="fade" data-effect-speed="500">
              <li class="header-item"><a class="header-link" href="https://github.com/sarthou/overworld"
                  tabindex="0"><img
                    src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/91/Octicons-mark-github.svg/1200px-Octicons-mark-github.svg.png"
                    alt="github" width="40px" height="40px" /></a></li>
            </ul>
          </div>
          <a class="navbar-icon" href="../../index.html">
            <img src="../../images/overworld_light.png" alt="overworld" height="65px" />
          </a>
        </div>
      </div>
    </header>
  </div>

  <div class="main">

    <div class="navigationbar">
      <ul class="sub-navigation">
        <li><a href="https://www.youtube.com/watch?v=LUkjts8UacI" target="_blank" rel="noopener noreferrer">Demo
            video</a></li>
        <li><a href="https://sarthou.github.io/ontologenius/index.html" target="_blank"
            rel="noopener noreferrer">Ontologenius</a></li>
        <li><a href="https://github.com/sarthou/overworld/actions" target="_blank"
            rel="noopener noreferrer">Pipelines</a></li>
      </ul>
      <h1>Overworld Cpp Documentation</h1>
    </div>

    <div class="content">
      <div class="sidebar" style="transition: all 0.2s ease-out 0s; top: -270px;">
        <div class="contents">
          <div id="contents-toggle" class=""></div>
          <h3>Contents</h3>
          <ul style="display: block;">
            <li class="level1"><a href="SetupRobot.html"><b>1. Setting up the robot description</b></a></li>
            <li class="level1"><a href="LaunchOverworld.html">2. Launch Overworld</a></li>
            <li class="level1"><a href="SetFov.html">3. Describe its field of view</a></li>
          </ul>
        </div>

        <div class="contents">
          <div id="contents-toggle" class=""></div>
          <h3>Getting Start</h3>
          <ul style="display: block;">
            <li class="level1"><a href="../../Download.html">Download</a></li>
            <li class="level1"><a href="../../InstallOverworld.html">Install Overworld</a></li>
            <li class="level1"><a href="../../AvailableModules.html">Available modules</a></li>
            <li class="level1"><a href="../Tutorials.html">Tutorials</a></li>
          </ul>
        </div>

        <div class="contents">
          <div id="contents-toggle" class=""></div>
          <h3>Overview</h3>
          <ul style="display: block;">
            <li class="level1"><a href="../../overview/launchers.html">Launchers</a></li>
            <li class="level1"><a href="../../overview/Configuration.html">Configuration</a></li>
            <li class="level1"><a href="../../overview/Plugins.html">Plugins</a></li>
            <li class="level1"><a href="../../overview/bulletGUI.html">Bullet GUI</a></li>
          </ul>
        </div>

      </div>

      <div class="context">
        <div class="toturial-header">
          <h1 class="title">Represent your robot</h1>
          <a class="toturial-subheader">
            <div class="tutorial-subheader__main-icon">
              <i class="fas fa-brain"></i>
            </div>
            <div class="toturial-subheader__title">
              <h2 class="title">I, robot</h2>
            </div>
          </a>
        </div>

        <h1 class="title">Setting up the robot description</h1>

        <p>Welcome to this first Overworld tutorial. As Overworld is a geometrical Situation Assessment component for
          Human-Robot Interaction, it is firstly centered around the robot itself.
          This is from the robot description that the robot will be able to perceive and thus reason about its world.
        </p>

        <p>In robotics and especially with the use of ROS, a robot description is something really common and now quite
          standardized. We will thus avoid reinventing the wheel!
          We just have to make sure that everything is properly done from the robot side and then we will be able to
          create a first basic Overworld configuration.
        </p>

        <h2>Setup a tutorial package</h2>

        <p>To facilitate the tutorials, we will first create a ROS package that we will use for all the following
          tutorials. Let's call it overworld_tutorials.
          For the moment we do not define any dependencies as it will just contain some configuration files, ontologies,
          and launch files.
        </p>

        <div class="code_block">
          <div class="terminal_line">cd ~/catkin_ws/src</div>
          <div class="terminal_line"><br></div>
          <div class="terminal_line">catkin_create_pkg overworld_tutorials</div>
        </div>

        <p>We can quickly clean the package.xml and CMakeLists files with their minimal content as follow:</p>

        <div class="code_block xml_code" style="counter-reset:code_line 0;">
          <div class="code_line">&lt;?<span class="xml_tag">xml</span> <span class="xml_param">version</span>=<span
              class="xml_string">&quot;1.0&quot;</span>?&gt;</div>
          <div class="code_line">&lt;<span class="xml_tag">package</span> <span class="xml_param">format</span>=<span
              class="xml_string">&quot;2&quot;</span>&gt;</div>
          <div class="code_line"> &lt;<span class="xml_tag">name</span>&gt;overworld_tutorials&lt;/<span
              class="xml_tag">name</span>&gt;</div>
          <div class="code_line"> &lt;<span class="xml_tag">version</span>&gt;0.0.0&lt;/<span
              class="xml_tag">version</span>&gt;</div>
          <div class="code_line"> &lt;<span class="xml_tag">description</span>&gt;The overworld_tutorials
            package&lt;/<span class="xml_tag">description</span>&gt;</div>
          <div class="code_line"> </div>
          <div class="code_line"> &lt;<span class="xml_tag">maintainer</span> <span class="xml_param">email</span>=<span
              class="xml_string">&quot;plop@plop.com&quot;</span>&gt;Plop&lt;/<span
              class="xml_tag">maintainer</span>&gt;</div>
          <div class="code_line"> &lt;<span class="xml_tag">license</span>&gt;MIT&lt;/<span
              class="xml_tag">license</span>&gt;</div>
          <div class="code_line"> </div>
          <div class="code_line"> &lt;<span class="xml_tag">buildtool_depend</span>&gt;catkin&lt;/<span
              class="xml_tag">buildtool_depend</span>&gt;</div>
          <div class="code_line">&lt;/<span class="xml_tag">package</span>&gt;</div>
        </div>

        <div class="code_block">
          <div class="terminal_line">cmake_minimum_required(VERSION 3.0.2)</div>
          <div class="terminal_line">project(overworld_tutorials)</div>
          <div class="terminal_line"></div>
          <div class="terminal_line">find_package(catkin REQUIRED)</div>
          <div class="terminal_line"></div>
          <div class="terminal_line">catkin_package()</div>
        </div>

        <p>Perfect, now compile your workspace to reference the newly created package.</p>

        <h2>Unified Robot Description Format (URDF)</h2>

        <p>The Unified Robot Description Format (URDF) is the most popular code-independent and human-readable way to
          describe the geometry of robots and their cells.
          Overworld thus uses it to get the robot model and dynamic.
        </p>

        <p>We will not write one by ourselves as such files are usually provided. For this tutorial, we will play with
          Eve (from the Walle movie) which is really simple.</p>

        <p>We will just publish the robot state and the joint state through ROS.
          To do so, let's create a launch folder in our package and in there create an eve_publisher.launch file with
          the following content.
        </p>

        <div class="code_block xml_code" style="counter-reset:code_line 0;">
          <div class="code_line">&lt;<span class="xml_tag">launch</span>&gt;</div>
          <div class="code_line"> &lt;<span class="xml_tag">param</span> <span class="xml_param">name</span>=<span
              class="xml_string">&quot;robot_description&quot;</span> <span class="xml_param">textfile</span>=<span
              class="xml_string">&quot;$(find overworld)/models/eve.urdf&quot;</span>/&gt;</div>
          <div class="code_line"> </div>
          <div class="code_line"> &lt;<span class="xml_tag">node</span> <span class="xml_param">name</span>=<span
              class="xml_string">&quot;joint_state_publisher&quot;</span> <span class="xml_param">pkg</span>=<span
              class="xml_string">&quot;joint_state_publisher_gui&quot;</span> <span class="xml_param">type</span>=<span
              class="xml_string">&quot;joint_state_publisher_gui&quot;</span>/&gt;</div>
          <div class="code_line"> &lt;<span class="xml_tag">node</span> <span class="xml_param">name</span>=<span
              class="xml_string">&quot;robot_state_publisher&quot;</span> <span class="xml_param">pkg</span>=<span
              class="xml_string">&quot;robot_state_publisher&quot;</span> <span class="xml_param">type</span>=<span
              class="xml_string">&quot;robot_state_publisher&quot;</span>/&gt;</div>
          <div class="code_line">&lt;/<span class="xml_tag">launch</span>&gt;</div>
        </div>

        <p>The robot_description parameter is a ROS parameter containing the robot URDF file content.
          Overworld will use this parameter to load the URDF in the same way Rviz does it.
        </p>

        <p>The joint_state_publisher_gui will open a little gui with slide bars allowing us to move our robot joints.
        </p>

        <p>Finally, the robot_state_publisher just publishes the robot state to tf (I'm sure you didn't guess it).
          It takes the joint angles of the robot as input and publishes the 3D poses of the robot links, using a
          kinematic tree model of the robot.
        </p>

        <p>Before moving on, let's see what our robot looks like. To do so, launch our new launch file as well as rviz.
          In the latter, set the base_link frame as the fixed frame then add a RobotModel and a Tf visualizer.
          You should have something as below.
        </p>

        <img src="../../images/Tutorials/tutorial1/rviz.png" alt="tutorial 1 rviz view" width="80%" class="center" />

        <p>Playing with the sliders, you can move the robot's arms and head.</p>

        <p>An important detail to be noticed, the robot has a camera frame whose forward axis is Z.
          For the moment, Overworld always assumes that the robot camera is built in such a way.
          This is important as Overworld uses this information to determine the robot's field of view.
        </p>

        <h2>Semantic description</h2>

        <p>Now that we have the geometry of our robot with its joints, its frames, and its meshes, we will describe it
          semantically to inform Overworld about the elements to consider.</p>

        <P>To do so, we will use an ontology. The ontology is used by Overworld as a semantic knowledge base available
          to the entire architecture.
          In such a way, instead of creating many configuration files for each component, we rather use the ontology.
          One of the main advantages is that as it is available to all the components, we ensure to get a homogeneous
          configuration.
          Let's start by creating an ontologies folder in our package then create a new file called "agents.owl" with
          the following content.
        </P>

        <div class="code_block xml_code" style="counter-reset:code_line 0;">
          <div class="code_line">&lt;?<span class="xml_tag">xml</span> <span class="xml_param">version</span>=<span class="xml_string">&quot;1.0&quot;</span>?&gt;</div>
          <div class="code_line">&lt;<span class="xml_tag">rdf:RDF</span> <span class="xml_param">xmlns</span>=<span class="xml_string">&quot;https://gitlab.laas.fr/discuter/overworld_tutorials/-/blob/master/ontologies/agents#&quot;</span></div>
          <div class="code_line">     <span class="xml_param">xmlns:agents</span>=<span class="xml_string">&quot;https://gitlab.laas.fr/discuter/overworld_tutorials/-/blob/master/ontologies/agents#&quot;</span></div>
          <div class="code_line">     <span class="xml_param">xmlns:cg_agents</span>=<span class="xml_string">&quot;https://github.com/RIS-WITH/common_ground_ontology/blob/master/CG_agents#&quot;</span></div>
          <div class="code_line">     <span class="xml_param">xmlns:cg_entities</span>=<span class="xml_string">&quot;https://github.com/RIS-WITH/common_ground_ontology/blob/master/CG_entities#&quot;</span></div>
          <div class="code_line">     <span class="xml_param">xmlns:rdf</span>=<span class="xml_string">&quot;http://www.w3.org/1999/02/22-rdf-syntax-ns#&quot;</span></div>
          <div class="code_line">     <span class="xml_param">xmlns:owl</span>=<span class="xml_string">&quot;http://www.w3.org/2002/07/owl#&quot;</span></div>
          <div class="code_line">     <span class="xml_param">xmlns:xml</span>=<span class="xml_string">&quot;http://www.w3.org/XML/1998/namespace&quot;</span></div>
          <div class="code_line">     <span class="xml_param">xmlns:xsd</span>=<span class="xml_string">&quot;http://www.w3.org/2001/XMLSchema#&quot;</span></div>
          <div class="code_line">     <span class="xml_param">xmlns:rdfs</span>=<span class="xml_string">&quot;http://www.w3.org/2000/01/rdf-schema#&quot;</span>&gt;</div>
          <div class="code_line">    &lt;<span class="xml_tag">owl:Ontology</span> <span class="xml_param">rdf:about</span>=<span class="xml_string">&quot;overworld_tutorials/ontologies/agents&quot;</span>&gt;</div>
          <div class="code_line">      &lt;<span class="xml_tag">owl:imports</span> <span class="xml_param">rdf:resource</span>=<span class="xml_string">&quot;https://github.com/RIS-WITH/common_ground_ontology/blob/master/CG_agents&quot;</span>/&gt;</div>
          <div class="code_line">    &lt;/<span class="xml_tag">owl:Ontology</span>&gt;</div>
          <div class="code_line">    </div>
          <div class="code_line">    </div>
          <div class="code_line">    </div>
          <div class="code_line">    <span class="xml_comment">&lt;!--</span> </div>
          <div class="code_line">    <span class="xml_comment">///////////////////////////////////////////////////////////////////////////////////////</span> </div>
          <div class="code_line">    <span class="xml_comment">//</span> </div>
          <div class="code_line">    <span class="xml_comment">// Individuals</span> </div>
          <div class="code_line">    <span class="xml_comment">//</span> </div>
          <div class="code_line">    <span class="xml_comment">///////////////////////////////////////////////////////////////////////////////////////</span> </div>
          <div class="code_line">    <span class="xml_comment"> --&gt;</span> </div>
          <div class="code_line">    </div>
          <div class="code_line">    </div>
          <div class="code_line">    </div>
          <div class="code_line">    <span class="xml_comment">&lt;!-- agents#base_link --&gt;</span></div>
          <div class="code_line">    </div>
          <div class="code_line">    &lt;<span class="xml_tag">owl:NamedIndividual</span> <span class="xml_param">rdf:about</span>=<span class="xml_string">&quot;agents#base_link&quot;</span>&gt;</div>
          <div class="code_line">        &lt;<span class="xml_tag">rdf:type</span> <span class="xml_param">rdf:resource</span>=<span class="xml_string">&quot;cg_agents#Base&quot;</span>/&gt;</div>
          <div class="code_line">    &lt;/<span class="xml_tag">owl:NamedIndividual</span>&gt;</div>
          <div class="code_line">    </div>
          <div class="code_line">    </div>
          <div class="code_line">    </div>
          <div class="code_line">    <span class="xml_comment">&lt;!-- agents#eve_head --&gt;</span></div>
          <div class="code_line">    </div>
          <div class="code_line">    &lt;<span class="xml_tag">owl:NamedIndividual</span> <span class="xml_param">rdf:about</span>=<span class="xml_string">&quot;agents#eve_head&quot;</span>&gt;</div>
          <div class="code_line">        &lt;<span class="xml_tag">rdf:type</span> <span class="xml_param">rdf:resource</span>=<span class="xml_string">&quot;cg_agents#Head&quot;</span>/&gt;</div>
          <div class="code_line">    &lt;/<span class="xml_tag">owl:NamedIndividual</span>&gt;</div>
          <div class="code_line">    </div>
          <div class="code_line">    </div>
          <div class="code_line">    </div>
          <div class="code_line">    <span class="xml_comment">&lt;!-- agents#left_gripper_frame --&gt;</span></div>
          <div class="code_line">    </div>
          <div class="code_line">    &lt;<span class="xml_tag">owl:NamedIndividual</span> <span class="xml_param">rdf:about</span>=<span class="xml_string">&quot;agents#left_gripper_frame&quot;</span>&gt;</div>
          <div class="code_line">        &lt;<span class="xml_tag">rdf:type</span> <span class="xml_param">rdf:resource</span>=<span class="xml_string">&quot;cg_agents#Hand&quot;</span>/&gt;</div>
          <div class="code_line">    &lt;/<span class="xml_tag">owl:NamedIndividual</span>&gt;</div>
          <div class="code_line">    </div>
          <div class="code_line">    </div>
          <div class="code_line">    </div>
          <div class="code_line">    <span class="xml_comment">&lt;!-- agents#right_gripper_frame --&gt;</span></div>
          <div class="code_line">    </div>
          <div class="code_line">    &lt;<span class="xml_tag">owl:NamedIndividual</span> <span class="xml_param">rdf:about</span>=<span class="xml_string">&quot;agents#right_gripper_frame&quot;</span>&gt;</div>
          <div class="code_line">        &lt;<span class="xml_tag">rdf:type</span> <span class="xml_param">rdf:resource</span>=<span class="xml_string">&quot;cg_agents#Hand&quot;</span>/&gt;</div>
          <div class="code_line">    &lt;/<span class="xml_tag">owl:NamedIndividual</span>&gt;</div>
          <div class="code_line">    </div>
          <div class="code_line">    </div>
          <div class="code_line">    </div>
          <div class="code_line">    <span class="xml_comment">&lt;!-- agents#eve --&gt;</span></div>
          <div class="code_line">    </div>
          <div class="code_line">    &lt;<span class="xml_tag">owl:NamedIndividual</span> <span class="xml_param">rdf:about</span>=<span class="xml_string">&quot;agents#eve&quot;</span>&gt;</div>
          <div class="code_line">        &lt;<span class="xml_tag">rdf:type</span> <span class="xml_param">rdf:resource</span>=<span class="xml_string">&quot;cg_agents#Robot&quot;</span>/&gt;</div>
          <div class="code_line">        &lt;<span class="xml_tag">cg_agents:hasBase</span> <span class="xml_param">rdf:resource</span>=<span class="xml_string">&quot;agents#base_link&quot;</span>/&gt;</div>
          <div class="code_line">        &lt;<span class="xml_tag">cg_agents:hasHead</span> <span class="xml_param">rdf:resource</span>=<span class="xml_string">&quot;agents#eve_head&quot;</span>/&gt;</div>
          <div class="code_line">        &lt;<span class="xml_tag">cg_agents:hasRightHand</span> <span class="xml_param">rdf:resource</span>=<span class="xml_string">&quot;agents#right_gripper_frame&quot;</span>/&gt;</div>
          <div class="code_line">        &lt;<span class="xml_tag">cg_agents:hasLeftHand</span> <span class="xml_param">rdf:resource</span>=<span class="xml_string">&quot;agents#left_gripper_frame&quot;</span>/&gt;</div>
          <div class="code_line">    &lt;/<span class="xml_tag">owl:NamedIndividual</span>&gt;</div>
          <div class="code_line">    </div>
          <div class="code_line">&lt;/<span class="xml_tag">rdf:RDF</span>&gt;</div>
        </div>

        <p>Let's break down the content of this file. At the top, you first have the namespaces declaration.
          Here we can see that the namespace of this file is "agents" and that we will use the namespaces "cg_agents"
          and "cg_entities" for the concepts coming from the common_ground ontology.
          After the declaration of the other usual namespaces, we can see that our ontology imports the CG_agents
          ontology which is a subset of the common ground ontology.
          You can note that we do not import the CG_entities ontology as it is already imported by the CG_agents one.
        </p>

        <p>The following is the description of the individuals of our ontology. It's there that we describe our robot.
          Here we start with the simplest description.</p>

<<<<<<< HEAD
        <p>The three first individuals are our robot's body parts.
          We declare a base, a head and two hands. The names of these parts are in fact the robot's frames that we want
          to consider as specific body parts.
          For example, we state that the frame head_camera_frame has to be considered as a head of an agent.
          Nevertheless, for each body part, we do not say to which agent they correspond.
          We do it in the agent description.
=======
        <p>The three first individuals are our robot's body parts. 
           We declare a base, a head and two hands. The names of these parts are in fact the robot's frames that we want to consider as specific body parts. 
           For example, we state that the frame eve_head has to be considered as a head of an agent. 
           Nevertheless, for each body part, we do not say to which agent they correspond. 
           We do it in the agent description.
>>>>>>> origin/dev
        </p>

        <p>Our agent is the fith individual.
          We can see that its identifier is "eve", that it is a Robot, and that it is composed of four body parts, a
          base, a head and two hands.
        </p>

<<<<<<< HEAD
        <p>To describe a robot, only a head and a base are required. Note that the head corresponds in fact to the robot
          camera whose forward axe is Z.
          For the hands, you can define, one, two, or none if you want.
=======
        <p>To describe a robot, only a head and a base are required. For the hands, you can define, one, two, or none if you want.
>>>>>>> origin/dev
        </p>

        <p>Now that we have fully described our robot, we will be able to launch Overworld!</p>

        <nav class="course-pagination">
          <a href="../Tutorials.html" class="course-pagination__btn">
            <i class="fas fa-angle-left"></i>
            <span>Tutorials</span>
          </a>
          <span class="course-pagination__separator"></span>
          <a href="LaunchOverworld.html" class="course-pagination__btn">
            <span>Launch Overworld</span>
            <i class="fas fa-angle-right"></i>
          </a>
        </nav>

      </div>
    </div>

  </div>
</body>

<footer>
  <div align="center">
    <p>
      Brought to you by:
      <a class="laas_logo" href="https://www.laas.fr/public/">
        <img src="../../images/LogoLAAS-2016_BW.png " alt="LAAS-CNRS" height="60px" />
      </a>
    </p>
  </div>
</footer>

</html>